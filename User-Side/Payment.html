<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Gateway</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f8f9fa;
            color: #333;
            padding: 20px;
        }

        .container {
            max-width: 600px;
            margin: 20px auto;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            padding: 30px;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #2d3748;
        }

        .payment-form label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #4a5568;
        }

        .payment-form input, .payment-form select {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border: 1px solid #e2e8f0;
            border-radius: 5px;
            font-size: 16px;
        }

        .payment-form input:focus, .payment-form select:focus {
            outline: none;
            border-color: #4299e1;
            box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.2);
        }

        .card-details {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            gap: 15px;
        }

        .card-number {
            grid-column: 1 / -1;
        }

        .submit-btn {
            background-color: #4299e1;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 5px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
            transition: background-color 0.3s;
        }

        .submit-btn:hover {
            background-color: #3182ce;
        }

        .card-icon {
            position: absolute;
            right: 10px;
            top: 12px;
            color: #a0aec0;
        }

        .input-wrapper {
            position: relative;
        }

        .secure-badge {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            color: #718096;
            font-size: 14px;
        }

        .secure-badge i {
            color: #48bb78;
        }

        .error {
            color: #e53e3e;
            font-size: 14px;
            margin-top: -15px;
            margin-bottom: 15px;
            display: none;
        }

        .currency-symbol {
            position: absolute;
            left: 10px;
            top: 12px;
            color: #4a5568;
        }

        .amount-input {
            padding-left: 30px !important;
        }

        .card-types {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }

        .card-type {
            padding: 8px 12px;
            border: 1px solid #e2e8f0;
            border-radius: 5px;
            opacity: 0.5;
            transition: all 0.3s;
        }

        .card-type.active {
            border-color: #4299e1;
            opacity: 1;
            box-shadow: 0 2px 5px rgba(66, 153, 225, 0.2);
        }

        @media (max-width: 600px) {
            .card-details {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
<div class="container">
    <h1>Payment Details</h1>
    <form class="payment-form" id="paymentForm">
        <div>
            <label for="name">Cardholder Name</label>
            <input type="text" id="name" placeholder="John Smith" required>
            <div class="error" id="nameError">Please enter a valid name</div>
        </div>

        <div>
            <label for="email">Email Address</label>
            <input type="email" id="email" placeholder="john@example.com" required>
            <div class="error" id="emailError">Please enter a valid email</div>
        </div>

        <div>
            <label for="amount">Amount (LKR)</label>
            <div class="input-wrapper">
                <span class="currency-symbol">Rs.</span>
                <input type="number" id="amount" class="amount-input" placeholder="0.00" min="1" step="0.01" required>
            </div>
            <div class="error" id="amountError">Please enter a valid amount</div>
        </div>

        <div class="card-details">
            <div class="card-number">
                <label for="cardNumber">Card Number</label>
                <div class="input-wrapper">
                    <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19" required>
                    <span class="card-icon" id="cardIcon">ðŸ’³</span>
                </div>
                <div class="error" id="cardError">Please enter a valid card number</div>

                <div class="card-types">
                    <div class="card-type" id="visa">VISA</div>
                    <div class="card-type" id="mastercard">MASTERCARD</div>
                </div>
            </div>

            <div>
                <label for="expiry">Expiry Date</label>
                <input type="text" id="expiry" placeholder="MM/YY" maxlength="5" required>
                <div class="error" id="expiryError">Please enter a valid date</div>
            </div>

            <div>
                <label for="cvv">CVV</label>
                <input type="text" id="cvv" placeholder="123" maxlength="3" required>
                <div class="error" id="cvvError">Please enter a valid CVV</div>
            </div>
        </div>

        <button type="submit" class="submit-btn" id="submitBtn">Pay Now (LKR)</button>

        <div class="secure-badge">
            <span>ðŸ”’</span>
            <span>Your payment information is secure</span>
        </div>
    </form>
</div>

<script>
    const paymentForm = document.getElementById('paymentForm');
    const cardNumberInput = document.getElementById('cardNumber');
    const expiryInput = document.getElementById('expiry');
    const submitBtn = document.getElementById('submitBtn');
    const visaType = document.getElementById('visa');
    const mastercardType = document.getElementById('mastercard');

    // Format card number with spaces
    cardNumberInput.addEventListener('input', function(e) {
        let value = e.target.value.replace(/\s+/g, '');
        let formattedValue = '';

        for (let i = 0; i < value.length; i++) {
            if (i > 0 && i % 4 === 0) {
                formattedValue += ' ';
            }
            formattedValue += value[i];
        }

        e.target.value = formattedValue;

        // Detect card type
        detectCardType(value);
    });

    // Detect card type based on first digits
    function detectCardType(cardNumber) {
        // Reset card types
        visaType.classList.remove('active');
        mastercardType.classList.remove('active');

        // Visa starts with 4
        if (cardNumber.startsWith('4')) {
            visaType.classList.add('active');
            return 'visa';
        }

        // Mastercard starts with 51-55 or 2221-2720
        if ((cardNumber.startsWith('5') && ['1', '2', '3', '4', '5'].includes(cardNumber.charAt(1))) ||
            (cardNumber.startsWith('2') &&
                (parseInt(cardNumber.substring(0, 4)) >= 2221 && parseInt(cardNumber.substring(0, 4)) <= 2720))) {
            mastercardType.classList.add('active');
            return 'mastercard';
        }

        return 'unknown';
    }

    // Format expiry date
    expiryInput.addEventListener('input', function(e) {
        let value = e.target.value.replace(/\D/g, '');

        if (value.length > 2) {
            e.target.value = value.substring(0, 2) + '/' + value.substring(2, 4);
        } else {
            e.target.value = value;
        }
    });

    // Update button text with current amount
    document.getElementById('amount').addEventListener('input', function(e) {
        const amount = e.target.value;
        if (amount && !isNaN(amount)) {
            submitBtn.textContent = `Pay Now (LKR ${parseFloat(amount).toLocaleString()})`;
        } else {
            submitBtn.textContent = 'Pay Now (LKR)';
        }
    });

    // Validate the form on submit
    paymentForm.addEventListener('submit', function(e) {
        e.preventDefault();

        let isValid = true;

        // Reset errors
        document.querySelectorAll('.error').forEach(el => el.style.display = 'none');

        // Validate name
        const name = document.getElementById('name').value;
        if (name.length < 3) {
            document.getElementById('nameError').style.display = 'block';
            isValid = false;
        }

        // Validate email
        const email = document.getElementById('email').value;
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
            document.getElementById('emailError').style.display = 'block';
            isValid = false;
        }

        // Validate amount
        const amount = document.getElementById('amount').value;
        if (amount <= 0) {
            document.getElementById('amountError').style.display = 'block';
            isValid = false;
        }

        // Validate card number (simple check for demo)
        const cardNumber = cardNumberInput.value.replace(/\s+/g, '');
        if (cardNumber.length < 16 || isNaN(cardNumber)) {
            document.getElementById('cardError').style.display = 'block';
            isValid = false;
        }

        // Check if card type is supported
        const cardType = detectCardType(cardNumber);
        if (cardType === 'unknown') {
            document.getElementById('cardError').textContent = 'Only Visa and Mastercard are accepted';
            document.getElementById('cardError').style.display = 'block';
            isValid = false;
        }

        // Validate expiry date
        const expiry = expiryInput.value;
        const expiryRegex = /^(0[1-9]|1[0-2])\/([0-9]{2})$/;
        if (!expiryRegex.test(expiry)) {
            document.getElementById('expiryError').style.display = 'block';
            isValid = false;
        } else {
            // Check if the card is expired
            const parts = expiry.split('/');
            const month = parseInt(parts[0]);
            const year = parseInt('20' + parts[1]);

            const now = new Date();
            const currentMonth = now.getMonth() + 1;
            const currentYear = now.getFullYear();

            if (year < currentYear || (year === currentYear && month < currentMonth)) {
                document.getElementById('expiryError').textContent = 'Card is expired';
                document.getElementById('expiryError').style.display = 'block';
                isValid = false;
            }
        }

        // Validate CVV
        const cvv = document.getElementById('cvv').value;
        if (cvv.length < 3 || isNaN(cvv)) {
            document.getElementById('cvvError').style.display = 'block';
            isValid = false;
        }

        if (isValid) {
            // Normally you would send the data to a server here
            // This is just a demonstration
            const formattedAmount = parseFloat(amount).toLocaleString();
            submitBtn.textContent = `Processing LKR ${formattedAmount}...`;
            submitBtn.disabled = true;

            setTimeout(() => {
                alert(`Payment of LKR ${formattedAmount} processed successfully!`);
                paymentForm.reset();
                submitBtn.textContent = 'Pay Now (LKR)';
                submitBtn.disabled = false;

                // Reset card types
                visaType.classList.remove('active');
                mastercardType.classList.remove('active');
            }, 1500);
        }
    });
</script>
</body>
</html>